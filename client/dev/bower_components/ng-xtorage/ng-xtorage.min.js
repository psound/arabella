!function(t){"use strict";t.module("emd.ng-xtorage",[]).provider("$xtorage",function(){var o=this,e="sessionStorage",r="localStorage",n={storage:e},i={storage:r};o.storage=r,o.unique=!1,this.$get=["$window",function(e){var r=o.storage,s=o.unique,a=function(o,e){var r=null;try{r=t.fromJson(o)}catch(n){r=e?parseInt(o):o}return r},u=function(o){var e=/[0-9]/;if(!t.isString(o)||!o.length)return null;for(var r=0;r<o.length;r++)if(!e.test(o[r]))return!1;return!0},c=function(o){return t.isArray(o)&&o.length},f=function(o){var e=t.isObject(o)?o:{};return e.storage||r},l=function(o){var e=t.isObject(o)?o:{};return e.unique||s},h=function(o,r,n){t.isObject(r)?e[n].setItem(o,t.toJson(r)):e[n].setItem(o,r)},g=function(o,e){for(var r=0;r<o.length;r++)if(t.equals(o[r],e))return!1;return!0},m=function(t,o,e,r,n){o[r](e),this.save(t,o,{storage:n})},v=function(t,o,e,r){var n=f(e),i=l(e),s=this.get(t,{storage:n})||[];i?g(s,o)&&m.call(this,t,s,o,r,n):m.call(this,t,s,o,r,n)},S=function(t,o,e){var r=f(o),n=this.get(t,{storage:r});n[e](),this.save(t,n,{storage:r})},p=function(t,o,e){var r=f(e),n=this.get(t,{storage:r})||[];n.splice(o,1),this.save(t,n,{storage:r})},F=function(t,o,e){var r=f(e);if(c(t))for(var n=0;n<t.length;n++)h(t[n],o[n],r);else h(t,o,r)},I=function(t,o,e){v.call(this,t,o,e,"push")},L=function(t,o,e){v.call(this,t,o,e,"unshift")},y=function(t,o){S.call(this,t,o,"pop")},A=function(t,o){S.call(this,t,o,"shift")},d=function(t,o){var r=f(o),n=e[r].getItem(t),i=[];if(c(t)){for(var s=0;s<t.length;s++){var l=e[r].getItem(t[s]);l&&i.push(a(l))}c(i)||(i=null)}else i=a(n,u(n));return i},q=function(t,o){var r=f(o);if(c(t))for(var n=0;n<t.length;n++)e[r].removeItem(t[n]);else e[r].removeItem(t)},b=function(t){var o=f(t);e[o].clear()},j=function(t){return this.get(t,n)},O=function(t){return this.get(t,i)},$=function(t,o){this.save(t,o,n)},w=function(t,o){this.save(t,o,i)},x=function(t,o){I.call(this,t,o,n)},J=function(t,o){I.call(this,t,o,i)},k=function(t,o){L.call(this,t,o,n)},z=function(t,o){L.call(this,t,o,i)},B=function(t){this.remove(t,n)},C=function(t){this.remove(t,i)},D=function(t,o){this.removeFromArray(t,o,i)},E=function(t,o){this.removeFromArray(t,o,n)},G=function(t){this.clear(t,n)},H=function(t){this.clear(t,i)},K=function(t){this.popFrom(t,i)},M=function(t){this.popFrom(t,n)},N=function(t){this.shiftFrom(t,i)},P=function(t){this.shiftFrom(t,n)};return{get:d,save:F,remove:q,clear:b,pushInto:I,unshiftInto:L,popFrom:y,shiftFrom:A,removeFromArray:p,getFromSessionStorage:j,getFromLocalStorage:O,saveInSessionStorage:$,saveInLocalStorage:w,pushIntoSessionStorage:x,pushIntoLocalStorage:J,unshiftIntoSessionStorage:k,unshiftIntoLocalStorage:z,removeFromSessionStorage:B,removeFromLocalStorage:C,removeFromArrayLocalStorage:D,removeFromArraySessionStorage:E,popFromSessionStorage:M,popFromLocalStorage:K,shiftFromSessionStorage:P,shiftFromLocalStorage:N,clearSessionStorage:G,clearLocalStorage:H}}]})}(angular);